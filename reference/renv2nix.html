<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>renv2nix — renv2nix • rix</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="renv2nix — renv2nix"><meta name="description" content="renv2nix"><meta property="og:description" content="renv2nix"><meta property="og:image" content="https://docs.ropensci.org/rix/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.15.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a-getting-started.html">a - Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using Nix and rix on Linux and Windows</a></li>
    <li><a class="dropdown-item" href="../articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using Nix and rix on macOS</a></li>
    <li><a class="dropdown-item" href="../articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a></li>
    <li><a class="dropdown-item" href="../articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/e-configuring-ide.html">e - Using an IDE with Nix shells</a></li>
    <li><a class="dropdown-item" href="../articles/f-renv2nix.html">f - Converting renv projects to Nix projects</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-using-nix-inside-docker.html">z - Advanced topic: Using Nix inside Docker</a></li>
    <li><a class="dropdown-item" href="../articles/z-binary_cache.html">z - Advanced topic: Rolling out your own binary cache</a></li>
    <li><a class="dropdown-item" href="../articles/z-bleeding_edge.html">z - Advanced topic: Understanding the rPackages set release cycle and using bleeding edge packages</a></li>
    <li><a class="dropdown-item" href="../articles/z-contributing_to_nixpkgs.html">z - Advanced topic: Contributing to nixpkgs</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/rix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>renv2nix</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/rix/blob/master/R/renv_helpers.R" class="external-link"><code>R/renv_helpers.R</code></a></small>
      <div class="d-none name"><code>renv2nix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>renv2nix</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">renv2nix</span><span class="op">(</span></span>
<span>  renv_lock_path <span class="op">=</span> <span class="st">"renv.lock"</span>,</span>
<span>  <span class="va">project_path</span>,</span>
<span>  return_rix_call <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fast"</span>, <span class="st">"accurate"</span><span class="op">)</span>,</span>
<span>  override_r_ver <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-renv-lock-path">renv_lock_path<a class="anchor" aria-label="anchor" href="#arg-renv-lock-path"></a></dt>
<dd><p>Character, path of the renv.lock file, defaults to
"renv.lock"</p></dd>


<dt id="arg-project-path">project_path<a class="anchor" aria-label="anchor" href="#arg-project-path"></a></dt>
<dd><p>Character, where to write <code>default.nix</code>, for example
"/home/path/to/project". The file will thus be written to the file
"/home/path/to/project/default.nix". If the folder does not exist, it will
be created.</p></dd>


<dt id="arg-return-rix-call">return_rix_call<a class="anchor" aria-label="anchor" href="#arg-return-rix-call"></a></dt>
<dd><p>Logical, return the generated rix function call
instead of evaluating it this is for debugging purposes, defaults to
<code>FALSE</code></p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character, the method of generating a nix environment from an
renv.lock file. "fast" is an inexact conversion which simply extracts the R
version and a list of all the packages in an renv.lock file and adds them
to the <code>r_pkgs</code> argument of <code><a href="rix.html">rix()</a></code>. This will use a snapshot of <code>nixpkgs</code>
that should contain package versions that are not too different from the
ones defined in the <code>renv.lock</code> file. For packages installed from GitHub or
similar, an attempt is made to handle them and pass them to the <code>git_pkgs</code>
argument of <code><a href="rix.html">rix()</a></code>. Currently defaults to "fast", "accurate" is not yet
implemented.</p></dd>


<dt id="arg-override-r-ver">override_r_ver<a class="anchor" aria-label="anchor" href="#arg-override-r-ver"></a></dt>
<dd><p>Character, defaults to NULL, override the R version
defined in the <code>renv.lock</code> file with another version. This is especially
useful if the <code>renv.lock</code> file lists a version of R not (yet) available
through Nix, or if the R version included in the <code>renv.lock</code> is too old
compared to the package versions. Can also be a date, check
<code><a href="available_dates.html">available_dates()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="rix.html">rix</a></code></p><dl><dt><code>system_pkgs</code></dt>
<dd><p>Vector of characters. List further software you wish to
install that are not R packages such as command line applications for
example. You can look for available software on the NixOS website
<a href="https://search.nixos.org/packages?channel=unstable&amp;from=0&amp;size=50&amp;sort=relevance&amp;type=packages&amp;query=" class="external-link">https://search.nixos.org/packages?channel=unstable&amp;from=0&amp;size=50&amp;sort=relevance&amp;type=packages&amp;query=</a></p></dd>

    <dt><code>local_r_pkgs</code></dt>
<dd><p>List. A list of local packages to install. These packages
need to be in the <code>.tar.gz</code> or <code>.zip</code> formats and must be in the same
folder as the generated "default.nix" file.</p></dd>

    <dt><code>tex_pkgs</code></dt>
<dd><p>Vector of characters. A set of TeX packages to install. Use
this if you need to compile <code>.tex</code> documents, or build PDF documents using
Quarto. If you don't know which package to add, start by adding "amsmath".
See the
<code>vignette("d2- installing-system-tools-and-texlive-packages-in-a-nix-environment")</code>
for more details.</p></dd>

    <dt><code>ide</code></dt>
<dd><p>Character, defaults to "none". If you wish to use RStudio to work
interactively use "rstudio" or "rserver" for the server version. Use "code"
for Visual Studio Code or "codium" for Codium, or "positron" for Positron.
You can also use "radian", an interactive REPL. This will install a
project-specific version of the chosen editor which will be differrent than
the one already present in your system (if any). For other editors or if
you want to use an editor already installed on your system (which will
require some configuration to make it work seamlessly with Nix shells see
the <code><a href="../articles/e-configuring-ide.html">vignette("e-configuring-ide")</a></code> for configuration examples), use
"none". Please be aware that VS Code and Positron are not free software. To
facilitate their installation, <code><a href="rix.html">rix()</a></code> automatically enables a required
setting without prompting the user for confirmation. See the "Details"
section below for more information.</p></dd>

    <dt><code>overwrite</code></dt>
<dd><p>Logical, defaults to FALSE. If TRUE, overwrite the
<code>default.nix</code> file in the specified path.</p></dd>

    <dt><code>print</code></dt>
<dd><p>Logical, defaults to FALSE. If TRUE, print <code>default.nix</code> to
console.</p></dd>

    <dt><code>message_type</code></dt>
<dd><p>Character. Message type, defaults to <code>"simple"</code>, which
gives minimal but sufficient feedback. Other values are currently
<code>"quiet</code>, which generates the files without message, and <code>"verbose"</code>,
displays all the messages.</p></dd>

    <dt><code>shell_hook</code></dt>
<dd><p>Character of length 1, defaults to <code>NULL</code>. Commands added
to the <code>shellHook</code> variable are executed when the Nix shell starts. So by
default, using <code>nix-shell default.nix</code> will start a specific program,
possibly with flags (separated by space), and/or do shell actions. You can
for example use <code>shell_hook = R</code>, if you want to directly enter the
declared Nix R session when dropping into the Nix shell.</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Nothing, this function is called for its side effects only, unless
<code>return_rix_call = TRUE</code> in which case an unevaluated call to <code><a href="rix.html">rix()</a></code> is
returned</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In order for this function to work properly, we recommend not
running it inside the same folder as an existing <code>{renv}</code> project. Instead,
run it from a new, empty directory which path you pass to <code>project_path</code>,
and use <code>renv_lock_path</code> to point to the <code>renv.lock</code> file in the original
<code>{renv}</code> folder. We recommend that you start from an empty folder to hold
your new Nix project, and copy the <code>renv.lock</code> file only (not any of the
other files and folders generated by <code>{renv}</code>) and then call <code>renv2nix()</code>
there. For more details, see <code><a href="../articles/f-renv2nix.html">vignette("f-renv2nix")</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># if the lock file is in another folder</span></span></span>
<span class="r-in"><span><span class="fu">renv2nix</span><span class="op">(</span></span></span>
<span class="r-in"><span>  renv_lock_path <span class="op">=</span> <span class="st">"path/to/original/renv_project/renv.lock"</span>,</span></span>
<span class="r-in"><span>  project_path <span class="op">=</span> <span class="st">"path/to/rix_project"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># you could also copy the renv.lock file in the folder of the Nix</span></span></span>
<span class="r-in"><span><span class="co"># project (don’t copy any other files generated by `{renv}`)</span></span></span>
<span class="r-in"><span><span class="fu">renv2nix</span><span class="op">(</span></span></span>
<span class="r-in"><span>  renv_lock_path <span class="op">=</span> <span class="st">"path/to/rix_project/renv.lock"</span>,</span></span>
<span class="r-in"><span>  project_path <span class="op">=</span> <span class="st">"path/to/rix_project"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

