<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Reproducible Data Science Environments with Nix • rix</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Reproducible Data Science Environments with Nix">
<meta name="description" content="Simplifies the creation of reproducible data science environments using the Nix package manager, as described in Dolstra (2006) &lt;ISBN 90-393-4130-3&gt;. The included `rix()` function generates a complete description of the environment as a `default.nix` file, which can then be built using Nix. This results in project specific software environments with pinned versions of R, packages, linked system dependencies, and other tools. Additional helpers make it easy to run R code in Nix software environments for testing and production.">
<meta property="og:description" content="Simplifies the creation of reproducible data science environments using the Nix package manager, as described in Dolstra (2006) &lt;ISBN 90-393-4130-3&gt;. The included `rix()` function generates a complete description of the environment as a `default.nix` file, which can then be built using Nix. This results in project specific software environments with pinned versions of R, packages, linked system dependencies, and other tools. Additional helpers make it easy to run R code in Nix software environments for testing and production.">
<meta property="og:image" content="https://docs.ropensci.org/rix/logo.png">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.15.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/a-getting-started.html">a - Getting started</a></li>
    <li><a class="dropdown-item" href="articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using Nix and rix on Linux and Windows</a></li>
    <li><a class="dropdown-item" href="articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using Nix and rix on macOS</a></li>
    <li><a class="dropdown-item" href="articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a></li>
    <li><a class="dropdown-item" href="articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="articles/e-configuring-ide.html">e - Using an IDE with Nix shells</a></li>
    <li><a class="dropdown-item" href="articles/f-renv2nix.html">f - Converting renv projects to Nix projects</a></li>
    <li><a class="dropdown-item" href="articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a></li>
    <li><a class="dropdown-item" href="articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a></li>
    <li><a class="dropdown-item" href="articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a></li>
    <li><a class="dropdown-item" href="articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a></li>
    <li><a class="dropdown-item" href="articles/z-advanced-topic-using-nix-inside-docker.html">z - Advanced topic: Using Nix inside Docker</a></li>
    <li><a class="dropdown-item" href="articles/z-binary_cache.html">z - Advanced topic: Rolling out your own binary cache</a></li>
    <li><a class="dropdown-item" href="articles/z-bleeding_edge.html">z - Advanced topic: Understanding the rPackages set release cycle and using bleeding edge packages</a></li>
    <li><a class="dropdown-item" href="articles/z-contributing_to_nixpkgs.html">z - Advanced topic: Contributing to nixpkgs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/rix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="rix-reproducible-environments-with-nix-">rix: Reproducible Environments with Nix 
<a class="anchor" aria-label="anchor" href="#rix-reproducible-environments-with-nix-"></a>
</h1>
</div>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#quick-start-for-returning-users">Quick start for returning users</a></li>
<li>
<a href="#getting-started-for-new-users">Getting started for new users</a>
<ul>
<li><a href="#docker">Docker</a></li>
</ul>
</li>
<li><a href="#how-is-nix-different-from-dockerrenvgroundhogranganaminicondaguix-or-why-nix">Why Nix? Comparison with Docker+renv/Conda/Guix</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#thanks">Thanks</a></li>
<li><a href="#recommended-reading">Recommended reading</a></li>
</ul>
<!-- badges: start -->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><a href="https://docs.ropensci.org/rix/">rix</a> is an R package that leverages <a href="https://nixos.org/" class="external-link">Nix</a>, a package manager focused on reproducible builds. With Nix, you can create project-specific environments with a custom version of R, its packages, and all system dependencies (e.g., <code>GDAL</code>). Nix ensures full reproducibility, which is crucial for research and development projects.</p>
<p>Use cases include running web apps (e.g., Shiny, <a href="https://www.rplumber.io" class="external-link">plumber</a> APIs) or <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> pipelines with a controlled R environment. Unlike <a href="https://rstudio.github.io/renv/" class="external-link">renv</a>, which snapshots package versions, <a href="https://docs.ropensci.org/rix/">rix</a> provides an entire ecosystem snapshot, including system-level dependencies.</p>
<p>While Nix has a steep learning curve, <a href="https://docs.ropensci.org/rix/">rix</a></p>
<ol style="list-style-type: decimal">
<li>simplifies creating Nix expressions, which define reproducible environments, also from <code>renv.lock</code> files;</li>
<li>lets you work interactively in IDEs like RStudio or VS Code, or use Nix in CI/CD workflows;</li>
<li>makes it easy to create Docker images with the right packages;</li>
<li>provides helpers that make it easy to build those environments, evaluate the same code in different development environments, and finally to deploy software environments in production.</li>
</ol>
<p>
If you want to watch a 5-Minute video introduction, click the image below:
</p>
<p><a href="https://youtu.be/OOu6gjQ310c?si=MRX0afStyQdVHLiV" target="_blank" rel="noopener noreferrer" class="external-link"> <img src="https://raw.githubusercontent.com/ropensci/rix/refs/heads/main/video_thumbnail.png" alt="Video Thumbnail" style="width:100%; max-width:560px; height:auto; display:block; margin:0 auto;"></a></p>
<p>Nix includes nearly all CRAN and Bioconductor packages, with the ability to install specific package versions or GitHub snapshots. Nix also includes Python, Julia (and many of their respective packages) as well as many, many other tools (up to 120’000 pieces of software as of writing). Expressions generated by <a href="https://docs.ropensci.org/rix/">rix</a> point to our fork of Nixpkgs which provides improved compatibility for older versions of R and R packages, especially for Apple Silicon computers.</p>
<p>If you have R installed, you can start straight away from your R session by first installing <a href="https://docs.ropensci.org/rix/">rix</a> from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rix"</span><span class="op">)</span></span></code></pre></div>
<p>or the development version from R-universe (development versions will generally have fixes and newer features):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rix"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://ropensci.r-universe.dev"</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now try to generate an expression using <code><a href="reference/rix.html">rix()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://docs.ropensci.org/rix/">"rix"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Choose the path to your project</span></span>
<span><span class="co"># This will create two files: .Rprofile and default.nix</span></span>
<span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="st">"."</span></span>
<span></span>
<span><span class="fu"><a href="reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"4.3.3"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"code"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This will generate two files, <code>default.nix</code> and <code>.Rprofile</code> in <code>project_default_nix</code>. <code>default.nix</code> is the environment definition written in the Nix programming language, and <code>.Rprofile</code> prevents conflicts with library paths from system-installed R versions, offering better control over your environment and improving isolation of Nix environments. <code>.Rprofile</code> is created by <code><a href="reference/rix_init.html">rix_init()</a></code> which is called automatically by the main function, <code><a href="reference/rix.html">rix()</a></code>.</p>
<p>It is also possible to provide a date instead of an R version:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Choose the path to your project</span></span>
<span><span class="co"># This will create two files: .Rprofile and default.nix</span></span>
<span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="st">"."</span></span>
<span></span>
<span><span class="fu"><a href="reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  date <span class="op">=</span> <span class="st">"2024-12-14"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"code"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The table below illustrates this all the different types of environment you can generate:</p>
<table border="1" class="table">
<thead><tr>
<th>
r_ver or date
</th>
<th>
Intended use
</th>
<th>
State of R version
</th>
<th>
State of CRAN packages
</th>
<th>
State of Bioconductor packages
</th>
<th>
State of other packages in Nixpkgs
</th>
</tr></thead>
<tbody>
<tr>
<td>
r_ver = “latest-upstream”
</td>
<td>
Start of new project where versions don’t matter
</td>
<td>
Current or previous
</td>
<td>
Outdated (up to 6 months)
</td>
<td>
Outdated (up to 6 months)
</td>
<td>
Current at time of generation
</td>
</tr>
<tr>
<td>
r_ver = “4.4.2” (or other)
</td>
<td>
Reproducing old project or starting a new project where versions don’t matter
</td>
<td>
Same as in <code>r_ver</code>, check <code><a href="reference/available_r.html">available_r()</a></code>
</td>
<td>
Outdated (up to 2 months if using latest release)
</td>
<td>
Outdated (up to 2 months if using latest release)
</td>
<td>
Potentially outdated (up to 12 months)
</td>
</tr>
<tr>
<td>
date = “2024-12-14”
</td>
<td>
Reproducing old project or starting a new project using the most recent date
</td>
<td>
Current at that date, check <code><a href="reference/available_dates.html">available_dates()</a></code>
</td>
<td>
Current at that date, check <code><a href="reference/available_dates.html">available_dates()</a></code>
</td>
<td>
Current at that date, check <code><a href="reference/available_dates.html">available_dates()</a></code>
</td>
<td>
Potentially outdated (up to 12 months)
</td>
</tr>
<tr>
<td>
r_ver = “bleeding-edge”
</td>
<td>
To develop against the latest release of CRAN
</td>
<td>
Always current
</td>
<td>
Always current
</td>
<td>
Always current
</td>
<td>
Always current
</td>
</tr>
<tr>
<td>
r_ver = “frozen-edge”
</td>
<td>
To develop against the latest release of CRAN, but manually manage updates
</td>
<td>
Current at time of generation
</td>
<td>
Current at time of generation
</td>
<td>
Current at time of generation
</td>
<td>
Current at time of generation
</td>
</tr>
<tr>
<td>
r_ver = “r-devel”
</td>
<td>
To develop/test against the development version of R
</td>
<td>
Development version
</td>
<td>
Always current
</td>
<td>
Always current
</td>
<td>
Always current
</td>
</tr>
<tr>
<td>
r_ver = “r-devel-bioc-devel”
</td>
<td>
To develop/test against the development version of R and Bioconductor
</td>
<td>
Development version
</td>
<td>
Always current
</td>
<td>
Development version
</td>
<td>
Always current
</td>
</tr>
<tr>
<td>
r_ver = “bioc-devel”
</td>
<td>
To develop/test against the development version of Bioconductor
</td>
<td>
Always current
</td>
<td>
Always current
</td>
<td>
Development version
</td>
<td>
Always current
</td>
</tr>
</tbody>
</table>
<p>If you want to benefit from relatively fresh packages and have a stable environment for production purposes, using a date for <code>r_ver</code> is likely your best option.</p>
</div>
<div class="section level2">
<h2 id="quick-start-for-returning-users">Quick-start for returning users<a class="anchor" aria-label="anchor" href="#quick-start-for-returning-users"></a>
</h2>
<details><summary>
Click to expand
</summary><p>If you’re already familiar with Nix and <a href="https://docs.ropensci.org/rix/">rix</a>, install Nix using the <a href="https://determinate.systems/posts/determinate-nix-installer" class="external-link">Determinate Systems installer</a>: (if you’re using WSL, do check out the <a href="https://docs.ropensci.org/rix/articles/b1-setting-up-and-using-rix-on-linux-and-windows.html#windows-pre-requisites">detailed installation instructions</a> though):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">curl</span> <span class="at">--proto</span> <span class="st">'=https'</span> <span class="at">--tlsv1.2</span> <span class="at">-sSf</span> <span class="at">-L</span> https://install.determinate.systems/nix <span class="kw">|</span> <span class="fu">sh</span> <span class="at">-s</span> <span class="at">--</span> install</span></code></pre></div>
<p>Then, install the <code>cachix</code> client and configure our <code>rstats-on-nix</code> cache; this will install binary versions of many R packages which will speed up the building process of environments:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">nix-env</span> <span class="at">-iA</span> cachix <span class="at">-f</span> https://cachix.org/api/v1/install</span></code></pre></div>
<p>then use the cache:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">cachix</span> use rstats-on-nix</span></code></pre></div>
<p>You only need to do this once per machine you want to use <a href="https://docs.ropensci.org/rix/">rix</a> on. Many thanks to <a href="https://www.cachix.org/" class="external-link">Cachix</a> for sponsoring the <code>rstats-on-nix</code> cache!</p>
<p><a href="https://docs.ropensci.org/rix/">rix</a> also includes a function called <code><a href="reference/setup_cachix.html">setup_cachix()</a></code> which will configure the cache but it is recommended to use the <code>cachix</code> client instead. This is because <code><a href="reference/setup_cachix.html">setup_cachix()</a></code> will not edit the files that require admin/root privileges and only edit the user-level files. This may not be enough depending on how you installed Nix. Using the <code>cachix</code> client takes care of everything.</p>
<p>You can then use <a href="https://docs.ropensci.org/rix/">rix</a> to build and enter a Nix-based R environment:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rix/">rix</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="st">"."</span></span>
<span></span>
<span><span class="fu"><a href="reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"4.3.3"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"code"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To build the environment, call <code><a href="reference/nix_build.html">nix_build()</a></code></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># nix_build() is a wrapper around the command line tool `nix-build`</span></span>
<span><span class="fu"><a href="reference/nix_build.html">nix_build</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<p>If you don’t have R installed, but have the Nix package manager installed, you can run a temporary terminal session which includes R and the released version of <a href="https://docs.ropensci.org/rix/">rix</a>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>nix<span class="sc">-</span>shell <span class="sc">-</span>p R rPackages.rix</span></code></pre></div>
<p>or if you prefer the development version of <a href="https://docs.ropensci.org/rix/">rix</a>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>nix<span class="sc">-</span>shell <span class="sc">--</span>expr <span class="st">"$(curl -sl https://raw.githubusercontent.com/ropensci/rix/main/inst/extdata/default.nix)"</span></span></code></pre></div>
You can then create new development environment definitions, build them, and start using them.
</details>
</div>
<div class="section level2">
<h2 id="getting-started-for-new-users">Getting started for new users<a class="anchor" aria-label="anchor" href="#getting-started-for-new-users"></a>
</h2>
<p>New to <a href="https://docs.ropensci.org/rix/">rix</a> and Nix? Start by reading the <code><a href="articles/a-getting-started.html">vignette("a-getting-started")</a></code> (<a href="https://docs.ropensci.org/rix/articles/a-getting-started.html">online documentation</a>). to learn how to set up and use Nix smoothly.</p>
<div class="section level3">
<h3 id="docker">Docker<a class="anchor" aria-label="anchor" href="#docker"></a>
</h3>
<p>Try Nix inside Docker by following this <code><a href="articles/z-advanced-topic-using-nix-inside-docker.html">vignette("z-advanced-topic-using-nix-inside-docker")</a></code> <a href="https://github.com/ropensci/rix/blob/HEAD/vignettes/z-advanced-topic-using-nix-inside-docker.Rmd" class="external-link">vignette</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="how-is-nix-different-from-dockerrenvgroundhogranganaminicondaguix-or-why-nix">How is Nix different from Docker+renv/{groundhog}/{rang}/(Ana/Mini)Conda/Guix? or Why Nix?<a class="anchor" aria-label="anchor" href="#how-is-nix-different-from-dockerrenvgroundhogranganaminicondaguix-or-why-nix"></a>
</h2>
<div class="section level3">
<h3 id="docker--renv">Docker + {renv}<a class="anchor" aria-label="anchor" href="#docker--renv"></a>
</h3>
<p>Docker and {renv} provide robust reproducibility by combining package snapshots with system-level dependencies. However, for long-term reproducibility, Nix offers a simpler approach by bundling everything (R, packages, and dependencies) in a single environment.</p>
</div>
<div class="section level3">
<h3 id="anaminiconda--mamba">Ana/Miniconda &amp; Mamba<a class="anchor" aria-label="anchor" href="#anaminiconda--mamba"></a>
</h3>
<p>Conda is similar to Nix, but Nix offers immutable environments, making it more reliable for preventing accidental changes. Nix also supports nearly all CRAN and Bioconductor packages, which Conda lacks.</p>
</div>
<div class="section level3">
<h3 id="nix-vs-guix">Nix vs. Guix<a class="anchor" aria-label="anchor" href="#nix-vs-guix"></a>
</h3>
<p>Guix, like Nix, focuses on reproducibility, but Nix supports more CRAN/Bioconductor packages and works across Windows, macOS, and Linux.</p>
</div>
<div class="section level3">
<h3 id="is-rix-all-there-is">Is {rix} all there is?<a class="anchor" aria-label="anchor" href="#is-rix-all-there-is"></a>
</h3>
<p>No, there are other tools that you might want to check out, especially if you want to set up polyglot environments (even though it is possible to use <a href="https://docs.ropensci.org/rix/">rix</a> to set up an environment with R and Python packages for example).</p>
<p>Take a look at <a href="https://devenv.sh/" class="external-link uri">https://devenv.sh/</a> and <a href="https://prefix.dev" class="external-link">https://prefix.dev/</a> if you want to explore other tools that make using Nix easier!</p>
</div>
</div>
<div class="section level2">
<h2 id="whats-the-recommended-workflow">What’s the recommended workflow?<a class="anchor" aria-label="anchor" href="#whats-the-recommended-workflow"></a>
</h2>
<p>Ideally, you shouldn’t be using a system-wide installation of R, and instead use dedicated Nix environments for each of your projects.</p>
<p>Start a new project by writing a file called <code>generate_env.R</code> and write something like:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">library</span>(rix)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>path_default_nix <span class="ot">&lt;-</span> <span class="st">"."</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">rix</span>(</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>  <span class="at">r_ver =</span> <span class="st">"4.3.3"</span>,                <span class="co"># Change to whatever R version you need</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>  <span class="at">r_pkgs =</span> <span class="fu">c</span>(<span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span>)  <span class="co"># Change to whatever packages you need</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>  <span class="at">system_pkgs =</span> <span class="cn">NULL</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>  <span class="at">git_pkgs =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>  <span class="at">ide =</span> <span class="st">"code"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>  <span class="at">project_path =</span> path_default_nix,</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>  <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>  <span class="at">print =</span> <span class="cn">TRUE</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>)</span></code></pre></div>
<p>Then use the following command to bootstrap an enivronment with R and <a href="https://docs.ropensci.org/rix/">rix</a> only (from the same directory):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>nix<span class="sc">-</span>shell <span class="sc">--</span>expr <span class="st">"$(curl -sl https://raw.githubusercontent.com/ropensci/rix/main/inst/extdata/default.nix)"</span></span></code></pre></div>
<p>and then simply run <code>Rscript generate_env.R</code> which will run the above script, thus generating the project’s <code>default.nix</code>. If you need to add packages, open the <code>generate_env.R</code> file again, modify it, and run it again, do not edit the <code>default.nix</code> directly. Also, commit all the files to version control to avoid any issues.</p>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Refer to <code>Contributing.md</code> to learn how to contribute to the package.</p>
<p>Please note that this package is released with a <a href="https://ropensci.org/code-of-conduct/" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="thanks">Thanks<a class="anchor" aria-label="anchor" href="#thanks"></a>
</h2>
<p>Thanks to the <a href="https://nixos.org/community/" class="external-link">Nix community</a> for making Nix possible, and thanks to the community of R users on Nix for their work packaging R and CRAN/Bioconductor packages for Nix (in particular <a href="https://github.com/jbedo" class="external-link">Justin Bedő</a>, <a href="https://github.com/minijackson" class="external-link">Rémi Nicole</a>, <a href="https://github.com/nviets" class="external-link">nviets</a>, <a href="https://github.com/cfhammill" class="external-link">Chris Hammill</a>, <a href="https://github.com/Kupac" class="external-link">László Kupcsik</a>, <a href="https://github.com/ciil" class="external-link">Simon Lackerbauer</a>, <a href="https://github.com/MrTarantoga" class="external-link">MrTarantoga</a> and every other person from the <a href="https://matrix.to/#/#r:nixos.org" class="external-link">Matrix Nixpkgs R channel</a>).</p>
<p>Finally, thanks to <a href="https://www.davidsolito.com/about/" class="external-link">David Solito</a> for creating <a href="https://docs.ropensci.org/rix/">rix</a>’s logo!</p>
</div>
<div class="section level2">
<h2 id="recommended-reading">Recommended reading<a class="anchor" aria-label="anchor" href="#recommended-reading"></a>
</h2>
<ul>
<li><a href="https://nixos.org/" class="external-link">NixOS’s website</a></li>
<li><a href="https://github.com/NixOS/nixpkgs" class="external-link">Nixpkgs’s GitHub repository</a></li>
<li>
<a href="https://brodrigues.co/index.html#category=nix" class="external-link">Nix for R series from Bruno’s blog</a>. Or, in case you like video tutorials, watch <a href="https://www.youtube.com/watch?v=c1LhgeTTxaI" class="external-link">this one on Reproducible R development environments with Nix</a>
</li>
<li><a href="https://nix.dev/tutorials/first-steps/towards-reproducibility-pinning-nixpkgs#pinning-nixpkgs" class="external-link">nix.dev tutorials</a></li>
<li><a href="https://nix-tutorial.gitlabpages.inria.fr/nix-tutorial/installation.html" class="external-link">INRIA’s Nix tutorial</a></li>
<li><a href="https://nixos.org/guides/nix-pills/" class="external-link">Nix pills</a></li>
<li><a href="https://github.com/nix-community/nix-data-science" class="external-link">Nix for Data Science</a></li>
<li>
<a href="https://christitus.com/nixos-explained/" class="external-link">NixOS explained</a>: NixOS is an entire Linux distribution that uses Nix as its package manager.</li>
<li><a href="https://rgoswami.me/posts/nix-r-devtools/" class="external-link">Blog post: Nix with R and devtools</a></li>
<li><a href="https://rgoswami.me/posts/rethinking-r-nix/" class="external-link">Blog post: Statistical Rethinking and Nix</a></li>
<li><a href="https://lazamar.github.io/download-specific-package-version-with-nix/" class="external-link">Blog post: Searching and installing old versions of Nix packages</a></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rix" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ropensci/rix/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ropensci/rix/issues" class="external-link">Report a bug</a></li>
</ul>
</div>



<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rix</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Bruno Rodrigues <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3211-3689" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Philipp Baumann <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3194-8975" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="r-universe">
<h2 data-toc-skip>R-universe</h2>
<ul class="list-unstyled">
<li><p><a href="https://ropensci.r-universe.dev/rix" class="external-link"><img src="https://ropensci.r-universe.dev/badges/rix" alt="rix status badge"></a></p></li>
</ul>
</div>

<div class="software-peer-review">
<h2 data-toc-skip>Software Peer-Review</h2>
<ul class="list-unstyled">
<li><p><a href="https://github.com/ropensci/software-review/issues/625" class="external-link"><img src="https://badges.ropensci.org/625_status.svg" alt="rOpenSci peer-review"></a></p></li>
</ul>
</div>

  </aside>
</div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
