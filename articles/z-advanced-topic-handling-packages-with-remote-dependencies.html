<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>z - Advanced topic: Handling packages with remote dependencies • rix</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="z - Advanced topic: Handling packages with remote dependencies">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.15.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a-getting-started.html">a - Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using Nix and rix on Linux and Windows</a></li>
    <li><a class="dropdown-item" href="../articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using Nix and rix on macOS</a></li>
    <li><a class="dropdown-item" href="../articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a></li>
    <li><a class="dropdown-item" href="../articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/e-configuring-ide.html">e - Using an IDE with Nix shells</a></li>
    <li><a class="dropdown-item" href="../articles/f-renv2nix.html">f - Converting renv projects to Nix projects</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-using-nix-inside-docker.html">z - Advanced topic: Using Nix inside Docker</a></li>
    <li><a class="dropdown-item" href="../articles/z-binary_cache.html">z - Advanced topic: Rolling out your own binary cache</a></li>
    <li><a class="dropdown-item" href="../articles/z-bleeding_edge.html">z - Advanced topic: Understanding the rPackages set release cycle and using bleeding edge packages</a></li>
    <li><a class="dropdown-item" href="../articles/z-contributing_to_nixpkgs.html">z - Advanced topic: Contributing to nixpkgs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/rix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>z - Advanced topic: Handling packages with remote dependencies</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/rix/blob/master/vignettes/z-advanced-topic-handling-packages-with-remote-dependencies.Rmd" class="external-link"><code>vignettes/z-advanced-topic-handling-packages-with-remote-dependencies.Rmd</code></a></small>
      <div class="d-none name"><code>z-advanced-topic-handling-packages-with-remote-dependencies.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Packages published on CRAN must have their dependencies on either
CRAN or Bioconductor, but not on GitHub. However, there are many
packages available on GitHub that never get published on CRAN, and some
of these packages may even depend on other packages that are also only
available on GitHub. <a href="https://docs.ropensci.org/rix/">rix</a> makes it possible to install
packages from GitHub and if these packages have dependencies that are
also on GitHub, these also get correctly added to the generated
<code>default.nix</code>.</p>
<p>There are however certain caveats you should be aware of.</p>
</div>
<div class="section level2">
<h2 id="the-lookup-package">The {lookup} package<a class="anchor" aria-label="anchor" href="#the-lookup-package"></a>
</h2>
<p>As an example we are going to use the <a href="https://github.com/jimhester/lookup" class="external-link">{lookup}</a> package which
has only been released on GitHub. <a href="https://github.com/jimhester/lookup" class="external-link">Here is the repository</a>.
This package comes with the <code>lookup()</code> function which makes
it possible to check the source code of any function from a loaded
package, even if the source of that function is in C or Fortran. To
create a reproducible development environment that makes <a href="https://github.com/jimhester/lookup" class="external-link">{lookup}</a> available to
you, you could use the following <code><a href="../reference/rix.html">rix::rix()</a></code> call:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"latest-upstream"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    package_name <span class="op">=</span> <span class="st">"lookup"</span>,</span>
<span>    repo_url <span class="op">=</span> <span class="st">"https://github.com/jimhester/lookup/"</span>,</span>
<span>    commit <span class="op">=</span> <span class="st">"eba63db477dd2f20153b75e2949eb333a36cccfc"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This will generate the following <code>default.nix</code>:</p>
<pre><code>let
 pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/ceea3d99cd55e2b343295eea205b19ecc47fe888.tar.gz") {};
  
    httr2 = (pkgs.rPackages.buildRPackage {
      name = "httr2";
      src = pkgs.fetchgit {
        url = "https://github.com/r-lib/httr2";
        rev = "c249b90d5c72d91ad5fab0660904710c56fd4568";
        sha256 = "sha256-x/q2oOqseencAFro73Dxoa2CuyiXnm5NNT1K77HgmLE=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages) 
          cli
          curl
          glue
          lifecycle
          magrittr
          openssl
          R6
          rappdirs
          rlang
          vctrs
          withr;
      };
    });

    gh = (pkgs.rPackages.buildRPackage {
      name = "gh";
      src = pkgs.fetchgit {
        url = "https://github.com/gaborcsardi/gh";
        rev = "HEAD";
        sha256 = "sha256-0ah0s9vvrJQcnOt6Be4oKIo+qD6OAiTTBZ7Upv7Vh9M=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages) 
          cli
          gitcreds
          glue
          ini
          jsonlite
          lifecycle
          rlang;
      } ++ [ httr2 ];
    });


    highlite = (pkgs.rPackages.buildRPackage {
      name = "highlite";
      src = pkgs.fetchgit {
        url = "https://github.com/jimhester/highlite";
        rev = "767b122ef47a60a01e1707e4093cf3635a99c86b";
        sha256 = "sha256-lkWMlAi75MYxiBUYnLwxLK9ApXkWanA4Mt7g4qtLpxM=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages) 
          Rcpp
          BH;
      };
    });


    memoise = (pkgs.rPackages.buildRPackage {
      name = "memoise";
      src = pkgs.fetchgit {
        url = "https://github.com/hadley/memoise";
        rev = "58d39726de141fefd235557a33e6478f76b0ad7f";
        sha256 = "sha256-y3UGutqIFFZn3z5dJzkzs/Fcdwc/+h+5iWofUP5NYic=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages) 
          digest;
      };
    });

    lookup = (pkgs.rPackages.buildRPackage {
      name = "lookup";
      src = pkgs.fetchgit {
        url = "https://github.com/jimhester/lookup/";
        rev = "eba63db477dd2f20153b75e2949eb333a36cccfc";
        sha256 = "sha256-arl7LVxL8xGUW3LhuDCSUjcfswX0rdofL/7v8Klw8FM=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages) 
          Rcpp
          codetools
          crayon
          rex
          jsonlite
          rstudioapi
          withr
          httr;
      } ++ [ highlite gh memoise ];
    });
    
  system_packages = builtins.attrValues {
    inherit (pkgs) 
      glibcLocales
      nix
      R;
  };
  
in

pkgs.mkShell {
  LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";
  LANG = "en_US.UTF-8";
   LC_ALL = "en_US.UTF-8";
   LC_TIME = "en_US.UTF-8";
   LC_MONETARY = "en_US.UTF-8";
   LC_PAPER = "en_US.UTF-8";
   LC_MEASUREMENT = "en_US.UTF-8";

  buildInputs = [ lookup   system_packages   ];
  
}</code></pre>
<p>as you can see, several other packages hosted on GitHub were added
automatically. This is because these were listed as remote dependencies
in <a href="https://kwstat.github.io/lookup/" class="external-link">lookup</a>’s <code>DESCRIPTION</code> file:</p>
<pre><code>Remotes:
    jimhester/highlite,
    gaborcsardi/gh,
    hadley/memoise</code></pre>
</div>
<div class="section level2">
<h2 id="caveats">Caveats<a class="anchor" aria-label="anchor" href="#caveats"></a>
</h2>
<div class="section level3">
<h3 id="authenticating-to-github">Authenticating to GitHub<a class="anchor" aria-label="anchor" href="#authenticating-to-github"></a>
</h3>
<p><a href="https://docs.ropensci.org/rix/">rix</a> uses the GitHub API to fetch the commits of these
remote packages and will attempt to select the commit of the remote
packages, whose date is closest to (always before, never after) the date
of the commit provided by the user. Note: <a href="https://docs.ropensci.org/rix/">rix</a> will only
be able to fetch a maximum of 1000 commits. That means if the commit you
provided is rather old or if the package has many commits, this will
fail and fallback to the <code>HEAD</code> of the repository. We have
not observed this in practice yet, but if this happens you should see a
message like this:</p>
<pre><code>Failed to get commit date for &lt;&lt;&lt; satijalab/seurat-wrappers &gt;&gt;&gt; No commits found before or on the target date
Falling back to &lt;&lt;&lt; HEAD &gt;&gt;&gt;</code></pre>
<p>If you don’t have a Github Personal Acccess Token set up, it will
show:</p>
<pre><code>When fetching the commit date from GitHub from &lt;&lt;&lt; ropensci/rix &gt;&gt;&gt;, no GitHub Personal Access Token found.
Please set GITHUB_PAT in your environment.
Falling back to unauthenticated API request.</code></pre>
<p>This should still work until you hit the API limit, in which case you
will see messages, such as this one:</p>
<pre><code>Failed to get commit date for &lt;&lt;&lt; satijalab/seurat-wrappers &gt;&gt;&gt; API request failed with status code 403.
Falling back to &lt;&lt;&lt; HEAD &gt;&gt;&gt;</code></pre>
<p>The status code 403 tells you that there is a credentials error
(e.g., because you hit the API limit). This is why we highly recommend
that you set up a GitHub Personal Access Token: this will allow
<a href="https://docs.ropensci.org/rix/">rix</a> to perform authenticated calls to the API, meaning
that <a href="https://docs.ropensci.org/rix/">rix</a> will be able to get up to 5000 API calls per
hour, instead of 60, dramatically improving the odds of success. To set
a GitHub PAT for the current session, simply run:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GITHUB_PAT<span class="op">=</span><span class="st">"YOUR_TOKEN"</span><span class="op">)</span></span></code></pre>
<p>Of course, you need to create a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic" class="external-link">GitHub
PAT first</a>. If don’t want to always have to set the
<code>GITHUB_PAT</code> environment variable, you can also use a more <a href="https://gitcreds.r-lib.org/index.html" class="external-link">long term solution</a>. For
more information on GitHub Tokens, please also refer to <a href="https://happygitwithr.com/https-pat" class="external-link">Happy Git and GitHub for the
useR</a>. For permanent storage, also refer to <a href="https://stackoverflow.com/a/5343146/21417317" class="external-link">this stackoverflow
question</a>.</p>
<p>Note: If you use <a href="https://gitcreds.r-lib.org/" class="external-link">gitcreds</a>, you still need to set the
<code>GITHUB_PAT</code> variable explicitly for each session before
calling <a href="https://docs.ropensci.org/rix/">rix</a>. To avoid exposing your PAT in your code, you
could use:</p>
<pre><code><span><span class="va">my_token</span> <span class="op">&lt;-</span> <span class="fu">gitcreds</span><span class="fu">::</span><span class="fu">gitcreds_get</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">password</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GITHUB_PAT <span class="op">=</span> <span class="va">my_token</span><span class="op">)</span></span></code></pre>
<p>However, you might still be getting the following message, even after
correctly configuring a GitHub PAT:</p>
<pre><code>Failed to get closest commit for gaborcsardi/gh: Failed to download commit data
Argument 'url' must be string..
Falling back to &lt;&lt;&lt; HEAD &gt;&gt;&gt;</code></pre>
<p>In this particular case, it might be due to the fact that the url
<code>https://github.com/gaborcsardi/gh</code> now points to
<code>https://github.com/r-lib/gh</code>. In instances like this, we
recommend to manually change the url and the revision from
<code>"HEAD"</code> to an actual commit. If you don’t do this, this
means that if these repositories are being actively worked on,
rebuilding these environments will actually pull another version of
these packages. So we very highly recommend to edit the
<code>default.nix</code>, and replace mentions of <code>HEAD</code> (if
any) with an actual commit. For example, edit this:</p>
<pre><code>gh = (pkgs.rPackages.buildRPackage {
  name = "gh";
  src = pkgs.fetchgit {
    url = "https://github.com/gaborcsardi/gh";
    rev = "HEAD";
    sha256 = "sha256-0ah0s9vvrJQcnOt6Be4oKIo+qD6OAiTTBZ7Upv7Vh9M=";
  };
  propagatedBuildInputs = builtins.attrValues {
    inherit (pkgs.rPackages)
      cli
      gitcreds
      glue
      ini
      jsonlite
      lifecycle
      rlang;
  } ++ [ httr2 ];
});</code></pre>
<p>to this:</p>
<pre><code>gh = (pkgs.rPackages.buildRPackage {
  name = "gh";
  src = pkgs.fetchgit {
    url = "https://github.com/gaborcsardi/gh";
    rev = "27db16cf363dc";
    sha256 = ""; # &lt;- You will need to try to build the expression once, and then
  };             # &lt;- put the sha256 that nix-build returns
  propagatedBuildInputs = builtins.attrValues {
    inherit (pkgs.rPackages)
      cli
      gitcreds
      glue
      ini
      jsonlite
      lifecycle
      rlang;
  } ++ [ httr2 ];
});</code></pre>
<p>Finally, and if instead the remotes are listed like this:</p>
<pre><code>Remotes:
    jimhester/highlite@abc123,
    gaborcsardi/gh@def123,
    hadley/memoise@ghi123</code></pre>
<p>then the listed commits will be used, which will make sure that the
build process is reproducible. Only commits can be used, anything else
listed there (such as pull request numbers or release tags) will not
work with <a href="https://docs.ropensci.org/rix/">rix</a>.</p>
</div>
<div class="section level3">
<h3 id="consider-using-dependencies-that-made-it-to-cran">Consider using dependencies that made it to CRAN<a class="anchor" aria-label="anchor" href="#consider-using-dependencies-that-made-it-to-cran"></a>
</h3>
<p><code>{highlite}</code> is a dependency of <a href="https://github.com/jimhester/lookup" class="external-link">{lookup}</a> that is only
available on GitHub. <a href="https://gh.r-lib.org/" class="external-link">gh</a> and <a href="https://memoise.r-lib.org" class="external-link">memoise</a> are
also listed as remote dependencies, however, they are also available on
CRAN now. This was not the case at the time when <a href="https://kwstat.github.io/lookup/" class="external-link">lookup</a>
was written (which was more than 6 years ago as of 2025). Because they
are listed as remote dependencies, they will also be built from GitHub
instead of CRAN.</p>
<p>Here, it is up to you to decide if you want to keep the GitHub
version of these packages, or if you should instead include the released
CRAN version. Depending on what you want to do, going for the CRAN
release of the packages might be advisable. For example in this case,
trying to build this expression will not work.</p>
<p>This is because <a href="https://httr2.r-lib.org" class="external-link">httr2</a> is a package that needs to be
compiled from source and which needs some Nix-specific fixes applied to
its source code for it to build successfully. Installing the version
provided by <code>nixpkgs</code>, which builds upon the released CRAN
version will succeed however. To do so, change the
<code>default.nix</code> manually to this (essentially remove the
definition of <a href="https://httr2.r-lib.org" class="external-link">httr2</a> and put it as a
<code>propagatedBuildInput</code> to <a href="https://gh.r-lib.org/" class="external-link">gh</a>):</p>
<pre><code>let
 pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/6a25f33c843a45b8d67ba782b6782973a7265774.tar.gz") {};

    gh = (pkgs.rPackages.buildRPackage {
      name = "gh";
      src = pkgs.fetchgit {
        url = "https://github.com/gaborcsardi/gh";
        rev = "HEAD";
        sha256 = "sha256-VpxFIfUEk0PudytQ3boMhEJhT0AnelWkSU++WD/HAyo=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages)
          cli
          gitcreds
          glue
          httr2 # &lt;- httr2 is now declared here, so it's the CRAN version
          ini
          jsonlite
          lifecycle
          rlang;
      };
    });

    highlite = (pkgs.rPackages.buildRPackage {
      name = "highlite";
      src = pkgs.fetchgit {
        url = "https://github.com/jimhester/highlite";
        rev = "767b122ef47a60a01e1707e4093cf3635a99c86b";
        sha256 = "sha256-lkWMlAi75MYxiBUYnLwxLK9ApXkWanA4Mt7g4qtLpxM=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages)
          Rcpp
          BH;
      };
    });

    memoise = (pkgs.rPackages.buildRPackage {
      name = "memoise";
      src = pkgs.fetchgit {
        url = "https://github.com/hadley/memoise";
        rev = "58d39726de141fefd235557a33e6478f76b0ad7f";
        sha256 = "sha256-y3UGutqIFFZn3z5dJzkzs/Fcdwc/+h+5iWofUP5NYic=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages)
          digest;
      };
    });

    lookup = (pkgs.rPackages.buildRPackage {
      name = "lookup";
      src = pkgs.fetchgit {
        url = "https://github.com/jimhester/lookup/";
        rev = "eba63db477dd2f20153b75e2949eb333a36cccfc";
        sha256 = "sha256-arl7LVxL8xGUW3LhuDCSUjcfswX0rdofL/7v8Klw8FM=";
      };
      propagatedBuildInputs = builtins.attrValues {
        inherit (pkgs.rPackages)
          Rcpp
          codetools
          crayon
          rex
          jsonlite
          rstudioapi
          withr
          httr;
      } ++ [ highlite gh memoise ];
    });

  system_packages = builtins.attrValues {
    inherit (pkgs)
      glibcLocales
      nix
      R;
  };

in

pkgs.mkShell {
  LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";
  LANG = "en_US.UTF-8";
   LC_ALL = "en_US.UTF-8";
   LC_TIME = "en_US.UTF-8";
   LC_MONETARY = "en_US.UTF-8";
   LC_PAPER = "en_US.UTF-8";
   LC_MEASUREMENT = "en_US.UTF-8";

  buildInputs = [ lookup   system_packages   ];

}</code></pre>
<p>In this manually edited expression, <a href="https://httr2.r-lib.org" class="external-link">httr2</a> will now
build successfully because Nix is instructed to build the CRAN version
by applying <a href="https://github.com/NixOS/nixpkgs/blob/7b87fced8bc525d466c7258a042bd12ea336a3c6/pkgs/development/r-modules/default.nix#L1817" class="external-link">this
fix</a> which was added there by packagers and maintainers of the R
programming language for <code>nixpkgs</code> (it is exactly the same if
you tried to install <a href="https://httr2.r-lib.org" class="external-link">httr2</a> from GitHub on Windows: you
would need to build it from source and thus make sure that you have the
required system-level dependencies to build it. Instead, it is easier to
install a pre-compiled binary from CRAN).</p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>In conclusion, <a href="https://docs.ropensci.org/rix/">rix</a> makes it easier to build packages
from GitHub which have themselves dependencies hosted on GitHub, you
should however make sure that the expression that is generated uses
fixed commits instead of <code>HEAD</code> for the packages being built
from GitHub (if <a href="https://docs.ropensci.org/rix/">rix</a> wasn’t able to automatically fetch
the right commit for you), and you should also decide if you want to use
the version of a packages hosted on GitHub instead of the CRAN release.
These are decisions that <a href="https://docs.ropensci.org/rix/">rix</a> cannot take for you.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
